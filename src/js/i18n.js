const titleI18n = {
    'zh-cn': 'ä¸€åˆ€æ–©ã®å°çª ~',
    'zh-tw': 'ä¸€åˆ€æ–¬ã®å°çª© ~',
    'en-us': "Yidaozhan's Homepage ~",
    'es-es': "Yidaozhan's Hogar ~"
}

const textI18n = {
    'zh-cn': {
        tabs: {
            home: 'é¦–é¡µ',
            blog: 'åšå®¢',
            files: 'æ–‡ä»¶',
            about: 'å…³äºŽ',
            comments: 'ç•™è¨€'
        },
        main: {
            home: {
                welcome: 'ðŸ‘‹ æ¬¢è¿Žæ¥åˆ°ä¸€åˆ€æ–©çš„ä¸»é¡µï¼',
                desc: {
                    l1: 'ðŸ« å±…ä½åœ¨è¾½å®ï¼Œæƒ³é•¿å¤§çš„æ™®é€šé«˜ä¸‰å­¦ç”Ÿ',
                    l2: 'ðŸŽ£ æ—¥å¸¸æ‘¸é±¼çš„è’Ÿè’»',
                    l3: 'ðŸ§ ä½¿ç”¨ Arch Linux æ“ä½œç³»ç»Ÿ',
                    l4: 'ðŸ æ­£åœ¨å­¦ä¹  Python å’Œ JavaScript',
                    l5: 'ðŸ”„ å¯¹æœªæ¥çš„æ–¹å‘è¿˜å¾ˆè¿·èŒ« â€¦ èµ°ä¸€æ­¥ç®—ä¸€æ­¥å§'
                },
                contact: 'â˜Žï¸ è”ç³»æˆ‘',
                recent: 'ðŸ“ æœ€è¿‘æ›´æ–°'
            },
            about: {
                about: 'ðŸ’– å…³äºŽå’±',
                l1: 'ðŸ¤— æƒ³é•¿å¤§çš„æ™®é€šé«˜ä¸‰æ‘¸é±¼å­¦ç”Ÿ',
                l2: 'ðŸ¥¦ æ˜¯åªè’Ÿè’»ï¼Œå•¥ä¹Ÿä¸ä¼š',
                l3: 'ðŸ–Šï¸ æ•°ç†åŒ–å¾ˆå·®ï¼Œæ­£åœ¨åŠªåŠ›æŒ£æ‰Ž',
                l4: 'ðŸ•¹ï¸ æ¸¸æˆæ‰“å¾—å¾ˆèœï¼Œä½†åˆèœåˆçˆ±çŽ©',
                l5: 'ðŸ§± ä¼šå†™ç»å…¸ Visual Basicï¼Œæ­£åœ¨å­¦ä¹  Python å’Œ JavaScript',
                l6: 'ðŸ«‚ çˆ±ç€èº«è¾¹çš„æ¯ä¸€ä¸ªäººï¼',
                fields: 'ðŸ”Ž æŸ¥æˆåˆ†',
                f1: ' å¼•è¯±äººï¼Œèœå¾—ä¸€åŒ¹',
                f2: ' ä»»å¤©å ‚ç²‰ä¸',
                f3: ' è½¦è½¦äºº (á—œË¬á—œ)',
                facts: 'ðŸŒŠ æœ‰è¶£çš„äº‹å®ž',
                fa1: 'ðŸ•°ï¸ å’±æ¯”è¾ƒå®ˆæ—§ï¼Œå¾ˆéš¾é€‚åº”æ–°é²œäº‹ç‰©ï¼Œè¢«ç§°ä¸ºã€Œèµ›åšåŽŸå§‹äººã€',
                fa2: 'ðŸ¤” æœ‰å¼ºè¿«ç—‡ï¼Œå› æ­¤æ²¡æ³•æŽ¥å— Material Design 3 ç­‰ä¸æ•´é½çš„ä¸œè¥¿',
                fa3: 'ðŸ§¸ ç›¸æ¯”èµ·å¤§å®¶è¿˜æ˜¯å¾ˆä¸æˆç†Ÿï¼Œè¢«å½“ä½œå°å­©å­ ... ç‰¹åˆ«æƒ³é•¿å¤§ï¼',
                l0v3: 'ðŸ¥° æ°¸è¿œçˆ±ä½ ä»¬ï¼',
                moe: 'â›© èŒICPå¤‡20212688å·'
            }
        }
    },
    'zh-tw': {
        tabs: {
            home: 'é¦–é ',
            blog: 'åšå®¢',
            files: 'æ–‡ä»¶',
            about: 'é—œæ–¼',
            comments: 'ç•™è¨€'
        },
        main: {
            home: {
                welcome: 'ðŸ‘‹ æ­¡è¿Žä¾†åˆ°ä¸€åˆ€æ–¬çš„ä¸»é ï¼',
                desc: {
                    l1: 'ðŸ« å±…ä½åœ¨é¼å¯§ï¼Œæƒ³é•·å¤§çš„æ™®é€šé«˜ä¸‰å­¸ç”Ÿ',
                    l2: 'ðŸŽ£ æ—¥å¸¸æ‘¸é­šçš„è’Ÿè’»',
                    l3: 'ðŸ§ ä½¿ç”¨ Arch Linux æ“ä½œç³»çµ±',
                    l4: 'ðŸ æ­£åœ¨å­¸ç¿’ Python å’Œ JavaScript',
                    l5: 'ðŸ”„ å°æœªä¾†çš„æ–¹å‘é‚„å¾ˆè¿·èŒ« â€¦ èµ°ä¸€æ­¥ç®—ä¸€æ­¥å§'
                },
                contact: 'â˜Žï¸ è¯ç¹«æˆ‘',
                recent: 'ðŸ“ æœ€è¿‘æ›´æ–°'
            },
            about: {
                about: 'ðŸ’– é—œæ–¼å’±',
                l1: 'ðŸ¤— æƒ³é•·å¤§çš„æ™®é€šé«˜ä¸‰æ‘¸é­šå­¸ç”Ÿ',
                l2: 'ðŸ¥¦ æ˜¯åªè’Ÿè’»ï¼Œå•¥ä¹Ÿä¸æœƒ',
                l3: 'ðŸ–Šï¸ æ•¸ç†åŒ–å¾ˆå·®ï¼Œæ­£åœ¨åŠªåŠ›æŽ™æ‰Ž',
                l4: 'ðŸ•¹ï¸ éŠæˆ²æ‰“å¾—å¾ˆèœï¼Œä½†åˆèœåˆæ„›çŽ©',
                l5: 'ðŸ§± æœƒå¯«ç¶“å…¸ Visual Basicï¼Œæ­£åœ¨å­¸ç¿’ Python å’Œ JavaScript',
                l6: 'ðŸ«‚ æ„›è‘—èº«é‚Šçš„æ¯ä¸€å€‹äººï¼',
                fields: 'ðŸ”Ž æŸ¥æˆåˆ†',
                f1: ' å¼•èª˜äººï¼Œèœå¾—ä¸€åŒ¹',
                f2: ' ä»»å¤©å ‚ç²‰çµ²',
                f3: ' è»Šè»Šäºº (á—œË¬á—œ)',
                facts: 'ðŸŒŠ æœ‰è¶£çš„äº‹å¯¦',
                fa1: 'ðŸ•°ï¸ å’±æ¯”è¼ƒå®ˆèˆŠï¼Œå¾ˆé›£é©æ‡‰æ–°é®®äº‹ç‰©ï¼Œè¢«ç¨±ç‚ºã€Œè³½åšåŽŸå§‹äººã€',
                fa2: 'ðŸ¤” æœ‰å¼·è¿«ç—‡ï¼Œå› æ­¤æ²’æ³•æŽ¥å— Material Design 3 ç­‰ä¸æ•´é½Šçš„æ±è¥¿',
                fa3: 'ðŸ§¸ ç›¸æ¯”èµ·å¤§å®¶é‚„æ˜¯å¾ˆä¸æˆç†Ÿï¼Œè¢«ç•¶ä½œå°å­©å­ ... ç‰¹åˆ¥æƒ³é•·å¤§ï¼',
                l0v3: 'ðŸ¥° æ°¸é æ„›ä½ å€‘ï¼',
                moe: 'â›© èŒICPå‚™20212688è™Ÿ'
            }
        }
    },
    'en-us': {
        tabs: {
            home: 'Home',
            blog: 'Blog',
            files: 'Files',
            about: 'About',
            comments: 'Comments'
        },
        main: {
            home: {
                welcome: 'ðŸ‘‹ Welcome to Yidaozhan Ya\'s Homepage!',
                desc: {
                    l1: 'ðŸ« A normal high school student who lives in Liaoning',
                    l2: 'ðŸŽ£ who is a rookie and knows a little about something',
                    l3: 'ðŸ§ Using Arch Linux as operating system',
                    l4: 'ðŸ Learning Python and JavaScript',
                    l5: 'ðŸ”„ Still confused about the future ... advancing in exploration!'
                },
                contact: 'â˜Žï¸ Contact Me',
                recent: 'ðŸ“ Recent Updates'
            },
            about: {
                about: 'ðŸ’– About Me',
                l1: 'ðŸ¤— A normal high school student who wants to grow up',
                l2: 'ðŸ¥¦ Rookie with only a little skills',
                l3: 'ðŸ–Šï¸ Math, Physics and Chemistry are very bad, struggling',
                l4: 'ðŸ•¹ï¸ Unskilled at playing games, but still love to play',
                l5: 'ðŸ§± Write classic Visual Basic, learning Python and JavaScript',
                l6: 'ðŸ«‚ Loving everyone around me!',
                fields: 'ðŸ”Ž Games played',
                f1: ' Rhythm games',
                f2: ' Nintendo',
                f3: ' Touhou Project',
                facts: 'ðŸŒŠ Fun Facts',
                fa1: 'ðŸ•°ï¸ I\'m more conservative, hard to adapt to new things, called "cyber primitive" by others',
                fa2: 'ðŸ¤” I can\'t accept things like Material Design 3 that are not neat',
                fa3: 'ðŸ§¸ Compared to everyone else, I\'m still very immature, being treated as a child ... very want to grow up!',
                l0v3: 'ðŸ¥° Love you all!',
                moe: 'â›© Moe ICP No.20212688'
            }
        }
    },
    'es-es': {
        tabs: {
            home: 'Inicio',
            blog: 'Blog',
            files: 'Archivos',
            about: 'Acerca de',
            comments: 'Comentarios'
        },
        main: {
            home: {
                welcome: 'ðŸ‘‹ Â¡Bienvenido a la pÃ¡gina de inicio de Yidaozhan Ya!',
                desc: {
                    l1: 'ðŸ« Un estudiante de secundaria normal que vive en Liaoning',
                    l2: 'ðŸŽ£ que es un novato y sabe un poco sobre algo',
                    l3: 'ðŸ§ Usando Arch Linux como sistema operativo',
                    l4: 'ðŸ Aprendiendo Python y JavaScript',
                    l5: 'ðŸ”„ TodavÃ­a confundido sobre el futuro ... Â¡avanzando en la exploraciÃ³n!'
                },
                contact: 'â˜Žï¸ Contacto',
                recent: 'ðŸ“ Actualizaciones recientes'
            },
            about: {
                about: 'ðŸ’– Acerca de mÃ­',
                l1: 'ðŸ¤— Un estudiante de secundaria normal que quiere crecer',
                l2: 'ðŸ¥¦ Novato con solo un poco de habilidades',
                l3: 'ðŸ–Šï¸ MatemÃ¡ticas, fÃ­sica y quÃ­mica son muy malas, luchando',
                l4: 'ðŸ•¹ï¸ Incompetente para jugar juegos, pero todavÃ­a ama jugar',
                l5: 'ðŸ§± Escribe Visual Basic clÃ¡sico, aprendiendo Python y JavaScript',
                l6: 'ðŸ«‚ Â¡Amando a todos los que me rodean!',
                fields: 'ðŸ”Ž Juegos jugados',
                f1: ' Juegos de ritmo',
                f2: ' Nintendo',
                f3: ' Proyecto Touhou',
                facts: 'ðŸŒŠ Datos divertidos',
                fa1: 'ðŸ•°ï¸ Soy mÃ¡s conservador, difÃ­cil adaptarse a las nuevas cosas, llamado "primitivo cibernÃ©tico" por otros',
                fa2: 'ðŸ¤” No puedo aceptar cosas como Material Design 3 que no estÃ¡n ordenadas',
                fa3: 'ðŸ§¸ En comparaciÃ³n con todos los demÃ¡s, todavÃ­a soy muy inmaduro, siendo tratado como un niÃ±o ... Â¡muy quiero crecer!',
                l0v3: 'ðŸ¥° Â¡Te amo a todos!',
                moe: 'â›© Moe ICP No.20212688'
            }
        }
    }
}

const imgI18n = {
    'zh-cn': {
        channel: 'é¢‘é“',
        name: 'æ˜¯ä¸€åˆ€æ–©å“’',
        group: 'ç¾¤'
    },
    'zh-tw': {
        channel: 'é »é“',
        name: 'æ˜¯ä¸€åˆ€æ–©å“’',
        group: 'ç¾£'
    },
    'en-us': {
        channel: 'Channel',
        name: 'Channel',
        group: 'Chat'
    },
    'es-es': {
        channel: 'Canal',
        name: 'Canal',
        group: 'Chat'
    }
}

function getLocaleId() {
    const locale = new URLSearchParams(window.location.search).get('locale') || navigator.language.toLowerCase()
    switch (locale) {
        case 'zh-cn':
            return 'zh-cn'
        case 'zh-tw':
            return 'zh-tw'
        case 'en-us':
        case 'en':
        case 'en-gb':
            return 'en-us'
        case 'es-es':
        case 'es':
            return 'es-es'
        default:
            return 'zh-cn'
    }
}

function getI18nString(i18nId) {
    // i18nId: like 'tabs.home'
    const localeId = getLocaleId()
    const i18nIdList = i18nId.split('.')
    let i18nString = textI18n[localeId]
    for (const i18nId of i18nIdList) {
        i18nString = i18nString[i18nId]
    }
    return i18nString
}

const localeId = getLocaleId()

if (!window.$) {
    window.$ = (selector) => document.querySelector(selector)
}

function i18nTitle() {
    document.title = titleI18n[localeId]
}

function i18nText() {
    for (const el of document.getElementsByClassName('i18n')) {
        const i18nId = el.getAttribute('data-i18n')
        if (el.innerHTML !== '') {
            el.innerHTML += getI18nString(i18nId)
        } else {
            el.innerText = getI18nString(i18nId)
        }
    }
}

function i18nImg() {
    for (const el of document.getElementsByClassName('imgI18n')) {
        const dataSrc = el.getAttribute('data-src')
        for (const key in imgI18n[localeId]) {
            if (dataSrc.includes(key)) {
                const value = imgI18n[localeId][key]
                const newSrc = dataSrc.replace(`{{${key}}}`, value)
                console.log(newSrc)
                el.setAttribute('src', newSrc)
            }
        }
    }
}

function i18n() {
    i18nTitle()
    i18nText()
    i18nImg()
}

window.addEventListener('load', () => {
    i18n()
})
