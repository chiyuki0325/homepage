const titleI18n = {
    'zh-cn': '一刀斩の小窝 ~',
    'zh-tw': '一刀斬の小窩 ~',
    'en-us': "Yidaozhan's Homepage ~",
    'es-es': "Yidaozhan's Hogar ~"
}

const textI18n = {
    'zh-cn': {
        tabs: {
            home: '首页',
            blog: '博客',
            files: '文件',
            about: '关于',
            comments: '留言'
        },
        main: {
            home: {
                welcome: '👋 欢迎来到一刀斩的主页！',
                desc: {
                    l1: '🏫 居住在辽宁，想长大的普通高三学生',
                    l2: '🎣 日常摸鱼的蒟蒻',
                    l3: '🐧 使用 Arch Linux 操作系统',
                    l4: '🐍 正在学习 Python 和 JavaScript',
                    l5: '🔄 对未来的方向还很迷茫 … 走一步算一步吧'
                },
                contact: '☎️ 联系我',
                recent: '📝 最近更新'
            },
            about: {
                about: '💖 关于咱',
                l1: '🤗 想长大的普通高三摸鱼学生',
                l2: '🥦 是只蒟蒻，啥也不会',
                l3: '🖊️ 数理化很差，正在努力挣扎',
                l4: '🕹️ 游戏打得很菜，但又菜又爱玩',
                l5: '🧱 会写经典 Visual Basic，正在学习 Python 和 JavaScript',
                l6: '🫂 爱着身边的每一个人！',
                fields: '🔎 查成分',
                f1: ' 引诱人，菜得一匹',
                f2: ' 任天堂粉丝',
                f3: ' 车车人 (ᗜˬᗜ)',
                facts: '🌊 有趣的事实',
                fa1: '🕰️ 咱比较守旧，很难适应新鲜事物，被称为「赛博原始人」',
                fa2: '🤔 有强迫症，因此没法接受 Material Design 3 等不整齐的东西',
                fa3: '🧸 相比起大家还是很不成熟，被当作小孩子 ... 特别想长大！',
                l0v3: '🥰 永远爱你们！',
                moe: '⛩ 萌ICP备20212688号'
            }
        }
    },
    'zh-tw': {
        tabs: {
            home: '首頁',
            blog: '博客',
            files: '文件',
            about: '關於',
            comments: '留言'
        },
        main: {
            home: {
                welcome: '👋 歡迎來到一刀斬的主頁！',
                desc: {
                    l1: '🏫 居住在遼寧，想長大的普通高三學生',
                    l2: '🎣 日常摸魚的蒟蒻',
                    l3: '🐧 使用 Arch Linux 操作系統',
                    l4: '🐍 正在學習 Python 和 JavaScript',
                    l5: '🔄 對未來的方向還很迷茫 … 走一步算一步吧'
                },
                contact: '☎️ 聯繫我',
                recent: '📝 最近更新'
            },
            about: {
                about: '💖 關於咱',
                l1: '🤗 想長大的普通高三摸魚學生',
                l2: '🥦 是只蒟蒻，啥也不會',
                l3: '🖊️ 數理化很差，正在努力掙扎',
                l4: '🕹️ 遊戲打得很菜，但又菜又愛玩',
                l5: '🧱 會寫經典 Visual Basic，正在學習 Python 和 JavaScript',
                l6: '🫂 愛著身邊的每一個人！',
                fields: '🔎 查成分',
                f1: ' 引誘人，菜得一匹',
                f2: ' 任天堂粉絲',
                f3: ' 車車人 (ᗜˬᗜ)',
                facts: '🌊 有趣的事實',
                fa1: '🕰️ 咱比較守舊，很難適應新鮮事物，被稱為「賽博原始人」',
                fa2: '🤔 有強迫症，因此沒法接受 Material Design 3 等不整齊的東西',
                fa3: '🧸 相比起大家還是很不成熟，被當作小孩子 ... 特別想長大！',
                l0v3: '🥰 永遠愛你們！',
                moe: '⛩ 萌ICP備20212688號'
            }
        }
    },
    'en-us': {
        tabs: {
            home: 'Home',
            blog: 'Blog',
            files: 'Files',
            about: 'About',
            comments: 'Comments'
        },
        main: {
            home: {
                welcome: '👋 Welcome to Yidaozhan Ya\'s Homepage!',
                desc: {
                    l1: '🏫 A normal high school student who lives in Liaoning',
                    l2: '🎣 who is a rookie and knows a little about something',
                    l3: '🐧 Using Arch Linux as operating system',
                    l4: '🐍 Learning Python and JavaScript',
                    l5: '🔄 Still confused about the future ... advancing in exploration!'
                },
                contact: '☎️ Contact Me',
                recent: '📝 Recent Updates'
            },
            about: {
                about: '💖 About Me',
                l1: '🤗 A normal high school student who wants to grow up',
                l2: '🥦 Rookie with only a little skills',
                l3: '🖊️ Math, Physics and Chemistry are very bad, struggling',
                l4: '🕹️ Unskilled at playing games, but still love to play',
                l5: '🧱 Write classic Visual Basic, learning Python and JavaScript',
                l6: '🫂 Loving everyone around me!',
                fields: '🔎 Games played',
                f1: ' Rhythm games',
                f2: ' Nintendo',
                f3: ' Touhou Project',
                facts: '🌊 Fun Facts',
                fa1: '🕰️ I\'m more conservative, hard to adapt to new things, called "cyber primitive" by others',
                fa2: '🤔 I can\'t accept things like Material Design 3 that are not neat',
                fa3: '🧸 Compared to everyone else, I\'m still very immature, being treated as a child ... very want to grow up!',
                l0v3: '🥰 Love you all!',
                moe: '⛩ Moe ICP No.20212688'
            }
        }
    },
    'es-es': {
        tabs: {
            home: 'Inicio',
            blog: 'Blog',
            files: 'Archivos',
            about: 'Acerca de',
            comments: 'Comentarios'
        },
        main: {
            home: {
                welcome: '👋 ¡Bienvenido a la página de inicio de Yidaozhan Ya!',
                desc: {
                    l1: '🏫 Un estudiante de secundaria normal que vive en Liaoning',
                    l2: '🎣 que es un novato y sabe un poco sobre algo',
                    l3: '🐧 Usando Arch Linux como sistema operativo',
                    l4: '🐍 Aprendiendo Python y JavaScript',
                    l5: '🔄 Todavía confundido sobre el futuro ... ¡avanzando en la exploración!'
                },
                contact: '☎️ Contacto',
                recent: '📝 Actualizaciones recientes'
            },
            about: {
                about: '💖 Acerca de mí',
                l1: '🤗 Un estudiante de secundaria normal que quiere crecer',
                l2: '🥦 Novato con solo un poco de habilidades',
                l3: '🖊️ Matemáticas, física y química son muy malas, luchando',
                l4: '🕹️ Incompetente para jugar juegos, pero todavía ama jugar',
                l5: '🧱 Escribe Visual Basic clásico, aprendiendo Python y JavaScript',
                l6: '🫂 ¡Amando a todos los que me rodean!',
                fields: '🔎 Juegos jugados',
                f1: ' Juegos de ritmo',
                f2: ' Nintendo',
                f3: ' Proyecto Touhou',
                facts: '🌊 Datos divertidos',
                fa1: '🕰️ Soy más conservador, difícil adaptarse a las nuevas cosas, llamado "primitivo cibernético" por otros',
                fa2: '🤔 No puedo aceptar cosas como Material Design 3 que no están ordenadas',
                fa3: '🧸 En comparación con todos los demás, todavía soy muy inmaduro, siendo tratado como un niño ... ¡muy quiero crecer!',
                l0v3: '🥰 ¡Te amo a todos!',
                moe: '⛩ Moe ICP No.20212688'
            }
        }
    }
}

const imgI18n = {
    'zh-cn': {
        channel: '频道',
        name: '是一刀斩哒',
        group: '群'
    },
    'zh-tw': {
        channel: '頻道',
        name: '是一刀斩哒',
        group: '羣'
    },
    'en-us': {
        channel: 'Channel',
        name: 'Channel',
        group: 'Chat'
    },
    'es-es': {
        channel: 'Canal',
        name: 'Canal',
        group: 'Chat'
    }
}

function getLocaleId() {
    const locale = new URLSearchParams(window.location.search).get('locale') || navigator.language.toLowerCase()
    switch (locale) {
        case 'zh-cn':
            return 'zh-cn'
        case 'zh-tw':
            return 'zh-tw'
        case 'en-us':
        case 'en':
        case 'en-gb':
            return 'en-us'
        case 'es-es':
        case 'es':
            return 'es-es'
        default:
            return 'zh-cn'
    }
}

function getI18nString(i18nId) {
    // i18nId: like 'tabs.home'
    const localeId = getLocaleId()
    const i18nIdList = i18nId.split('.')
    let i18nString = textI18n[localeId]
    for (const i18nId of i18nIdList) {
        i18nString = i18nString[i18nId]
    }
    return i18nString
}

const localeId = getLocaleId()

if (!window.$) {
    window.$ = (selector) => document.querySelector(selector)
}

function i18nTitle() {
    document.title = titleI18n[localeId]
}

function i18nText() {
    for (const el of document.getElementsByClassName('i18n')) {
        const i18nId = el.getAttribute('data-i18n')
        if (el.innerHTML !== '') {
            el.innerHTML += getI18nString(i18nId)
        } else {
            el.innerText = getI18nString(i18nId)
        }
    }
}

function i18nImg() {
    for (const el of document.getElementsByClassName('imgI18n')) {
        const dataSrc = el.getAttribute('data-src')
        for (const key in imgI18n[localeId]) {
            if (dataSrc.includes(key)) {
                const value = imgI18n[localeId][key]
                const newSrc = dataSrc.replace(`{{${key}}}`, value)
                console.log(newSrc)
                el.setAttribute('src', newSrc)
            }
        }
    }
}

function i18n() {
    i18nTitle()
    i18nText()
    i18nImg()
}

window.addEventListener('load', () => {
    i18n()
})
